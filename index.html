<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>jootubemusic – Web Player</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- 전체 래퍼 -->
  <div class="app-shell">
    <!-- 상단 헤더 / 내비게이션 -->
    <header class="topbar">
      <div class="topbar-left">
        <div class="logo">
          <div class="logo-mark">
            <span class="logo-wave wave1"></span>
            <span class="logo-wave wave2"></span>
            <span class="logo-wave wave3"></span>
          </div>
          <span class="logo-text">jootubemusic</span>
        </div>

        <nav class="main-nav">
          <button class="nav-item nav-item-active" data-view="home">Home</button>
          <button class="nav-item" data-view="podcasts">Podcasts</button>
          <button class="nav-item" data-view="library">Library</button>
        </nav>
      </div>

      <div class="topbar-center">
        <!-- 검색창: 기존 search-bar 를 상단으로 이동 -->
        <div class="search-bar search-bar-top">
          <input
            id="searchInput"
            type="text"
            placeholder="앨범, 아티스트, 트랙 검색"
          />
          <button id="searchBtn">검색</button>
        </div>
      </div>

      <div class="topbar-right">
        <span id="authStatus" class="auth-status"></span>
        <button id="authToggleBtn" class="auth-btn">Login</button>
      </div>
    </header>

    <!-- 본문 레이아웃: 좌측 사이드 + 메인 -->
    <div class="app-body">
      <!-- 좌측 사이드바 (Home/Podcasts/Library 유지 + 카테고리) -->
      <aside class="sidebar">
        <div class="sidebar-section">
          <div class="sidebar-title">Browse</div>
          <button class="sidebar-link sidebar-link-active" data-view="home">Home</button>
          <button class="sidebar-link" data-view="podcasts">Podcasts</button>
          <button class="sidebar-link" data-view="library">Library</button>
        </div>

        <div class="sidebar-section">
          <div class="sidebar-title">Categories</div>
          <div id="categoryBar" class="category-bar sidebar-categories">
            <button class="category-btn active" data-category="all">All</button>
            <button class="category-btn" data-category="kpop">K-Pop</button>
            <button class="category-btn" data-category="pop">Pop</button>
            <button class="category-btn" data-category="ost">OST</button>
            <button class="category-btn" data-category="etc">Etc</button>
          </div>
        </div>
      </aside>

      <!-- 메인 콘텐츠 -->
      <main class="content">
        <p class="info">
          좋아하는 앨범을 추가하고, 유튜브 트랙을 연결해서 나만의 웹 플레이어를 만들어 보세요.
        </p>

        <section class="section-my">
          <h2 class="section-title">내 앨범</h2>
          <div id="myGrid" class="grid"></div>
          <div id="empty" class="empty">아직 추가된 앨범이 없습니다.</div>
        </section>
      </main>
    </div>
  </div>

  <!-- 검색 결과 모달 -->
  <div id="searchModal" class="modal" style="display: none">
    <div id="modalBackdrop" class="modal-backdrop"></div>
    <div class="modal-content">
      <div class="modal-header">
        <span id="modalTitle"></span>
        <button id="modalClose" class="modal-close">&times;</button>
      </div>
      <div id="modalGrid" class="grid"></div>
    </div>
  </div>

  <!-- 트랙 모달 -->
  <div id="trackModal" class="modal" style="display: none">
    <div id="trackBackdrop" class="modal-backdrop"></div>
    <div class="modal-content terminal-modal">
      <div class="modal-header">
        <div>
          <span id="trackModalTitle"></span>
          <button id="trackAddBtn" class="track-add-btn">+ 트랙 추가</button>
        </div>
        <button id="trackModalClose" class="modal-close">&times;</button>
      </div>
      <ul id="trackList" class="track-list"></ul>
    </div>
  </div>

  <!-- 커버 URL 모달 -->
  <div id="coverModal" class="modal" style="display: none">
    <div id="coverBackdrop" class="modal-backdrop"></div>
    <div class="modal-content">
      <div class="modal-header">
        <span id="coverModalTitle"></span>
        <button id="coverModalClose" class="modal-close">&times;</button>
      </div>
      <p id="coverInfo" class="info">앨범 커버 이미지 URL을 입력하세요.</p>
      <input
        id="coverUrlInput"
        class="cover-input"
        type="text"
        placeholder="https://example.com/cover.jpg"
      />
      <div class="cover-preview-wrap">
        <img id="coverPreview" class="cover-preview" alt="cover preview" />
      </div>
      <button id="coverSaveBtn" class="cover-save-btn">저장</button>
    </div>
  </div>

  <!-- 앨범 옵션 모달 -->
  <div id="albumOptionModal" class="modal" style="display: none">
    <div id="albumOptionBackdrop" class="modal-backdrop"></div>
    <div class="modal-content modal-content-compact">
      <div class="modal-header">
        <span id="albumOptionTitle"></span>
        <button id="albumOptionClose" class="modal-close">&times;</button>
      </div>
      <div class="modal-body">
        <p>이 앨범에 대해 작업을 선택하세요.</p>
        <button id="albumOptionCoverBtn" class="option-btn">커버 수정</button>
        <button id="albumOptionCategoryBtn" class="option-btn">카테고리 변경</button>
        <button id="albumOptionDeleteBtn" class="option-btn option-danger">앨범 삭제</button>
      </div>
    </div>
  </div>

  <!-- 카테고리 관리 모달 -->
  <div id="categoryModal" class="modal" style="display: none">
    <div id="categoryBackdrop" class="modal-backdrop"></div>
    <div class="modal-content modal-content-compact">
      <div class="modal-header">
        <span>카테고리 선택</span>
        <button id="categoryModalClose" class="modal-close">&times;</button>
      </div>
      <div class="modal-body">
        <p style="margin-bottom: 8px">앨범 카테고리를 지정하세요.</p>
        <div id="categoryList" class="category-list-modal"></div>
      </div>
    </div>
  </div>

  <!-- 미니 플레이어 -->
  <div id="miniPlayer" class="mini-player" style="display: none">
    <img id="miniCover" class="mini-cover" alt="cover" />
    <div class="mini-meta">
      <div id="miniTitle" class="mini-meta-title"></div>
      <div id="miniArtist" class="mini-meta-artist"></div>
      <div class="mini-timeline">
        <span id="miniCurrentTime" class="mini-time">00:00</span>
        <input
          id="miniSeek"
          class="mini-seek"
          type="range"
          min="0"
          max="100"
          step="0.1"
          value="0"
        />
        <span id="miniDuration" class="mini-time">00:00</span>
      </div>
    </div>
    <button id="miniToggle" class="mini-btn mini-toggle"></button>
    <button id="miniHide" class="mini-btn">▶▶</button>
  </div>

  <!-- YouTube IFrame 컨테이너 (숨김) -->
  <div id="player-container" class="player-container">
    <iframe
      id="sc-player"
      style="opacity:0; visibility:hidden; width:1px; height:1px; position:absolute; pointer-events:none;"
      scrolling="no"
      frameborder="no"
      src=""
      allow="autoplay"
    ></iframe>
    <div id="ytPlayer" style="width:0; height:0; overflow:hidden;"></div>
  </div>

  <script type="module" src="script.js"></script>
</body>
</html>
